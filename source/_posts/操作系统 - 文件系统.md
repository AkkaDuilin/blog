---
title: 操作系统 - 文件系统
date: 2022-11-28 13:51:45   
permalink:         
categories:  
    - 操作系统
    -
    -       
tags: 
    - 操作系统
    - 存储管理
    - 文件系统
description:        
image:             
copyright: true     
---

<img src="https://" alt="" style="width:100%" />  

**前言**

操作系统 - 文件系统



<!-- more -->

# 文件概念

## 文件属性
- 文件名
- 长度
- 创建时间
- 存放位置
- 访问控制限权
- 。。。

## 结构
- 文件内信息的组织方式
- 便于程序理解文件内容
- **操作系统和应用程序**决定文件结构
### 常用文件结构
- 无结构
- 简单记录结构
- 复杂结构

## 类型
| 文件类型       | 常用扩展名         | 功能                       |
| -------------- | ------------------ | -------------------------- |
| 可执行文件     | exe com binor none | 可运行的机器语言           |
| 目标文件       | obj o              | 已编译尚未链接的机器语言   |
| 源代码文件     | c cc java asm      | 各种语言的源代码           |
| 批处理文件     | bat sh             | 命令解释程序的命令         |
| 标记文件       | xml html tex       | 文本数据                   |
| 文字处理文件   | xml rtf docx       | 各自文字处理的格式         |
| 库文件         | lib s so dll       | 为程序员提供的程序库       |
| 打印或可视文件 | gif pdf jpg        | 打印或图像格式的二进制文件       |
| 档案文件       | rar zip tar        | 相关文件压缩组成的归档文件 |
| 多媒体文件     | mov mp3 avi mpeg   | 包含音频的二进制文件                           |


# 逻辑文件及访问方式

## 逻辑文件
- 文件呈现在用户面前的组织结构
- 决定文件访问方法
## 访问方法
### 顺序访问
- 文件信息按顺序处理
- 依次访问数据，不能跳转到文件指定位置
#### 优点
- 节省存储空间
#### 缺点
- 访问效率差

### 直接访问
- 允许程序按任意顺序快速读取或写入记录
- 直接通过计算得到需要读写的位置进行读写
#### 优点
- 访问效率高
#### 缺点
- 浪费存储空间

### 索引
- 为顺序文件建立索引表

# 目录与磁盘的结构

## 文件控制块 FCB
- 存放文件所需的各类文件属性
- 类似一个索引项
- 文件名，文件长度

## 文件检索
### 过程
1. 打开目录文件
2. 从磁盘读入该目录文件的一个块，包含若干目录项
3. 根据文件名遍历内存中该块，找到则结束
4. 若没有，则读入新的块
### 目录性能
- 块 内存和存储设备数据交换的基本单位
- 目录文件数为n 则平均遍历目录项数$(1+n)/2$
### i Node
- 为每个文件控制块建立一个索引表，内容为文件名和指向文件控制块的指针，称为inode索引节点
- 目录文件只包含一个inode索引节点，每个索引节点是一个目录项，在索引节点中有一个指针，指向该文件的文件控制块，文件控制块再指向对应文件，这样遍历目录项就算遍历索引节点

## 文件保护
### 类型
- 读写
- 执行
- 添加删除
- 列表清单

### linux访问模式
- R W X 读 写 执行
| 用户     | 代码 | R W X |
| -------- | ---- | ----- |
| 所有者   | 7    | 1 1 1 |
| 组用户   | 6    | 1 1 0 |
| 公共用户 | 1    | 0 0 1      |

## 目录结构

### 单层目录
- 所有文件在同一个目录中，只有根目录
#### 优点
- 结构简单
#### 缺点
- 检索效率差
- 不能分组
- 不能有同名文件

### 双层目录
- 美国用户由自己的目录结构
- 目录下的目录
#### 优点
- 不同用户可以有相同文件名文件
- 比单层目录提高检索效率
#### 缺点
- 无法分组
- 同一用户不能有相同文件名文件

### 树型目录
- 双层目录的扩展 n层
#### 优点
- 检索效率高
- 可以分组
- 允许重名
#### 一些概念
- 当前目录：工作目录
- **绝对路径**：从**根目录**开始的路径
- **相对路径**：从**当前目录**开始的路径
#### 性能

### 图型目录
- 实现文件共享
#### 文件共享
##### 硬链接
- 硬链接的优点是：当用户误删原文件时，**硬链接还能找到存储在磁盘的数据，可以作为新的原文件继续使用**，适用于系统文件的链接；一个硬链接**占用的空间很小**。
- 硬链接的缺点是：只能对已经存在的文件进行创建，不能交叉文件系统创建，**不能对目录创建**。
##### 符号链接
- 软链接的优点是：没有类似硬链接的诸多限制，可以有自己的文件属性和权限，，**可对文件或目录进行创可对不存在的文件或目录进行创建建，可交叉系统创建**。
- 软链接的缺点是：若指向的原文件被删除，则相关软连接成为死链接；**占用的空间较大**。
# xx3x

<hr />
版权信息