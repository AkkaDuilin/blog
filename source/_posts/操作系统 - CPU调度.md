---
title: 操作系统-CPU调度
categories:
  - 操作系统
  - null
  - null
tags:
  - CPU调度
  - 操作系统
copyright: true
date: 2022-10.04 10:21:00
permalink:
description:
image:
---

<img src="https://" alt="" style="width:100%" />  

**前言**

操作系统CPU调度



<!-- more -->

# 概述
## CPU调度
### 长程调度
从新建状态转换到就绪状态的操作是**长程调度(作业调度/高级调度)**
决定哪一个程序可以进入系统

### 中程调度
将进程在内存和外存间换进换出
**目的：节省内存空间**

### 短程调度
- 在**就绪队列挑选进程执行**是短程调度 
![[Pasted image 20221010143948.png]]


```ad-tip

- 长程调度是“作业-进程”之间的调度
- 中程调度是“挂起-激活”之间的调度
- 短程调度是“就绪-运行”之间的调度
```


## 进程调度队列
- 作业队列 系统中所有进程的集合
- 就绪队列 就绪并等待执行的所有进程集合
- 设备队列 等待某一I/O设备的进程队列

## CPU调度过程
### 调度程序
- 根据策略**选择**内存中的一个就绪进程
- 做选择
### 分派程序
- 负责把CPU的控制权转交给CPU调度程序
- **切换上下文**
- 切换到用户态
- 跳转到用户程序的适当位置并重新运行


## 调度方式
### 非抢占式调度
- 系统不可以抢占已分配的CPU并分配给其他进程
- 系统开销小 适合批处理系统
- 响应时间长 不适合交互性系统

### 抢占式调度
- 调度程序可以根据某种规则暂停
- 正在执行的进程，将CPU分配给另一个进程
- **系统开销大**
- 防止单一进程长时间独占CPU

```ad-tip
# 进程状态转换
1. 运行 -> 等待 非抢占式
2. 运行 -> 就绪 抢占式
3. 等待 -> 就绪 抢占式
4. 终止运行 非抢占式


```

# 调度准则
**基本指标**
![[Pasted image 20221004103646.png]]


# 调度算法

## FCFS
先来先服务调度算法
- 调度策略：按照进程请求CPU先后顺序使用CPU
- 调度依据：进入就绪队列的时间
- 调度方法：线进入就绪队列的进程被优先选中进行
- 使用FIFO队列实现
- 对长作业有利
![[Pasted image 20221004102916.png]]


## SJF
短作业优先调度算法
- 调度策略：关联到每个进程下次运行的CPU脉冲长度，调度最短的进程
- 调度依据：每个进程下次运行的CPU脉冲长度
- 调度方法：调度最短的进程运行
- **具有最短的平均等待时间**

抢占式/非抢占式 - 新来的进程能否抢占当前运行进程的CPU
**会出现长进程长时间等待**


### 非抢占式
![[Pasted image 20221004113403.png]]

### 抢占式
![[Pasted image 20221004104541.png]]

## 优先级调度算法
- 调度依据：优先级
- 调度方法：调度优先级最高进程
- 优先数
	- 静态优先数 运行过程不变化
	- 动态优先数 运行过程可变化

### 非抢占式
![[Pasted image 20221004113001.png]]

### 抢占式
![[Pasted image 20221004113019.png]]


### 相应比
![[Pasted image 20221004113728.png]]

## RR
时间片轮转
- 分时系统设计
- 调度依据：类似FCFS
- 调度方法：每个进程运行时间长度为i一个时间片，时间片用完后该进程被抢占并插入就绪队列末尾
- 新到来的进程比现在正在运行的进程先进入就绪队列
- 一般准则 时间片/10 > 进程上下文切换时间
- **获得最短响应时间**
![[Pasted image 20221004114126.png]]

```ad-question
**12、在时间片轮转算法中，时间片越小，则（）。**A、C、D  

A.平均响应时间短  

B.平均等待时间小  

C.进程切换越频繁  

D.系统开销大
```
## MLQ
多级队列调度
- 允许系统存在多个就绪队列，每个队列有自己的调度算法
- 分为前台(交互式 RR) 后台(批处理 FCFS)
### 要素
- 队列数
- 每一队列的调度算法
- 决定新进程将进入哪个队列的方法

![[Pasted image 20221010135413.png]]


## MLFQ
多级反馈队列调度
- 能在不同队列间移动(相比MLQ)
- 具有更好的灵活性

# more